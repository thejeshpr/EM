{% extends 'em/base.html' %}
{% load humanize %}
{% load crispy_forms_tags %}

{% block content %}


    <div class="card mt-2 em-fg em-text">        
        <div class="card-body">
            <div class="card-title"><h3><i class="{{ category.icon }}"></i> Categories</h3></div>
            {% for entry in categories %}
            <div class="card em-bg mt-1">
                <div class="card-body em-bg">
                  <div class="row">
                    <div class="col-sm-5 col-md-6">
                        <a href="{% url 'em:category-detail' pk=entry.category %}" class="em-text">
                            #{{ entry.category }} - <i class="{{ entry.category.icon }}"></i>{{ entry.category__name }}
                        </a>                        
                        <br/>                        
                        <span class="secondary" style="color:gray;">
                            Percentage: {% widthratio entry.spendings overall_expense 100 %}%
                        </span>
                    </div>     
                    <div class="col-sm-7 col-md-6">                        
                      <div class="em-center-align em-amount em-expense"><h1><i class="las la-rupee-sign"></i>{{ entry.spendings|floatformat|intcomma }}</h1></div>                                              
                        <div class="progress em-bg" style="height: 3px;">
                            <div class="progress-bar bg-info" role="progressbar" style="width: {% widthratio entry.spendings overall_expense 100 %}%" aria-valuenow="{% widthratio entry.spendings overall_expense 100 %}" aria-valuemin="0" aria-valuemax="100" ></div>
                        </div>
                    </div>
                     
                  </div>
                </div>
              </div>
              
            {% endfor %}             
        </div>        
    </div>

    {% endblock %}
